<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hello World!</title>
  </head>
  <body>
    <h1>Hello World!</h1>
    <p> We are using node <script>document.write(process.versions.node)</script>,
    Chrome <script>document.write(process.versions.chrome)</script>,
    and Electron <script>document.write(process.versions.electron)</script>. 
    </p>
    <table id="gamestable">
        <tr id=>
            <th> Game Name </th>
            <th> Game Path </th>
            <th> Game Save </th>
        </tr>
    </table>
    <ul></ul>
    
    <!--
    <script src="./userlist.js"></script>
    <script src="./window1.js"></script>
    -->
    <script src="./retro-gamelist.js"></script>
    <script src="./window1.js"></script>
    <script> 
        const electron = require('electron');
        const {ipcRenderer} = electron;
        const ul = document.querySelector("ul");

        var retrogamelist = new RetroGames();


        ipcRenderer.on("game:add", function (event, game) {
            retrogamelist.addGameRaw(game.name, game.rom, game.savefiles);
            var currentGame = new RetroGame(game.name, game.rom, game.savefiles);
            console.log(currentGame);
            tablebody = document.getElementById("gamestable");

            const tablerow = document.createElement("tr");
            tablerow.id = "game-" + (retrogamelist.getLength()-1);
            const cell1 = document.createElement("td");
            const cell2 = document.createElement("td");
            const cell3 = document.createElement("td");
            const textCell1 = document.createTextNode(currentGame.getName());
            const textCell2 = document.createTextNode(currentGame.getRom());
            const textCell3 = document.createTextNode(currentGame.getSavefiles()[0]);
            cell1.appendChild(textCell1);
            cell2.appendChild(textCell2);
            cell3.appendChild(textCell3);
            tablerow.appendChild(cell1);
            tablerow.appendChild(cell2);
            tablerow.appendChild(cell3);
            tablebody.appendChild(tablerow);
        });



    </script>
  </body>
</html>